{"ast":null,"code":"import { APIService } from '@/core/util/services/api.service';\nimport { reactive, toRefs, computed } from 'vue';\nimport { formatDate, parseDate } from '@ohrm/core/util/helper/datefns';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport useLocale from '@/core/util/composable/useLocale';\nimport useInfiniteScroll from '@/core/util/composable/useInfiniteScroll';\nimport AddTrackerLogModal from '@/orangehrmPerformancePlugin/components/AddTrackerLogModal';\nimport EditTrackerLogModal from '@/orangehrmPerformancePlugin/components/EditTrackerLogModal';\nimport DeleteConfirmationDialog from '@/core/components/dialogs/DeleteConfirmationDialog';\nimport EmployeeTrackerLogCard from '@/orangehrmPerformancePlugin/components/EmployeeTrackerLogCard';\nimport { OxdIcon, OxdSheet, OxdSpinner } from '@ohrm/oxd';\nexport default {\n  name: 'ViewEmployeeTrackerLogs',\n  components: {\n    'oxd-icon': OxdIcon,\n    'oxd-sheet': OxdSheet,\n    'oxd-loading-spinner': OxdSpinner,\n    'add-tracker-log-modal': AddTrackerLogModal,\n    'edit-tracker-log-modal': EditTrackerLogModal,\n    'delete-confirmation': DeleteConfirmationDialog,\n    'employee-tracker-log-card': EmployeeTrackerLogCard\n  },\n  props: {\n    trackerId: {\n      type: Number,\n      required: true\n    },\n    empNumber: {\n      type: Number,\n      required: true\n    }\n  },\n  setup(props) {\n    const http = new APIService(window.appGlobal.baseUrl, `/api/v2/performance/trackers/${props.trackerId}/logs`);\n    const limit = 10;\n    const state = reactive({\n      total: 0,\n      items: [],\n      meta: {\n        positive: 0,\n        negative: 0\n      },\n      infinite: false,\n      isLoading: false,\n      showNoRecordsFound: false\n    });\n    const {\n      $tEmpName\n    } = useEmployeeNameTranslate();\n    const {\n      jsDateFormat\n    } = useDateFormat();\n    const {\n      locale\n    } = useLocale();\n    const fetchData = () => {\n      state.showNoRecordsFound = false;\n      state.isLoading = true;\n      http.getAll({\n        limit: limit,\n        offset: state.items.length === 0 ? 0 : limit\n      }).then(response => {\n        const {\n          data,\n          meta\n        } = response.data;\n        state.total = meta?.total || 0;\n        if (Array.isArray(data)) {\n          state.items = [...state.items, ...data.map(item => {\n            return {\n              ...item,\n              reviewerPictureSrc: `${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${item.reviewer.empNumber}`,\n              reviewerName: $tEmpName(item.reviewer),\n              addedDate: formatDate(parseDate(item.addedDate), jsDateFormat, {\n                locale\n              }),\n              modifiedDate: formatDate(parseDate(item.modifiedDate), jsDateFormat, {\n                locale\n              })\n            };\n          })];\n          state.meta = {\n            ...state.meta,\n            ...meta\n          };\n        }\n      }).finally(() => {\n        state.showNoRecordsFound = state.total === 0;\n        state.isLoading = false;\n      });\n    };\n    const {\n      scrollerRef\n    } = useInfiniteScroll(() => {\n      if (state.items.length >= state.total) return;\n      fetchData();\n    });\n    const imgSrc = computed(() => {\n      return `${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${props.empNumber}`;\n    });\n    return {\n      http,\n      scrollerRef,\n      fetchData,\n      ...toRefs(state),\n      imgSrc\n    };\n  },\n  data() {\n    return {\n      trackerName: '',\n      employeeName: '',\n      showAddTrackerModal: false,\n      showEditTrackerModal: false,\n      editTrackerLogId: null\n    };\n  },\n  beforeMount() {\n    this.http.request({\n      method: 'GET',\n      url: `/api/v2/performance/employees/trackers/${this.trackerId}`\n    }).then(response => {\n      const {\n        data\n      } = response.data;\n      this.trackerName = data.trackerName;\n      this.employeeName = `${data.employee.firstName} ${data.employee.lastName} ${data.employee.terminationId ? ` ${this.$t('general.past_employee')}` : ''}`;\n    }).then(() => {\n      this.fetchData();\n    });\n  },\n  methods: {\n    onClickAdd() {\n      this.showAddTrackerModal = true;\n    },\n    onAddTrackerModalClose() {\n      this.showAddTrackerModal = false;\n      this.resetItems();\n    },\n    onEditTrackerModalClose() {\n      this.showEditTrackerModal = false;\n      this.resetItems();\n    },\n    onClickEdit(id) {\n      this.editTrackerLogId = id;\n      this.showEditTrackerModal = true;\n    },\n    onClickDelete(id) {\n      this.$refs.deleteDialog.showDialog().then(confirmation => {\n        if (confirmation === 'ok') {\n          this.deleteItems([id]);\n        }\n      });\n    },\n    deleteItems(items) {\n      if (items instanceof Array) {\n        this.items = [];\n        this.isLoading = true;\n        this.http.deleteAll({\n          ids: items\n        }).then(() => {\n          return this.$toast.deleteSuccess();\n        }).finally(() => {\n          this.fetchData();\n        });\n      }\n    },\n    resetItems() {\n      this.items = [];\n      this.fetchData();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["APIService","reactive","toRefs","computed","formatDate","parseDate","useEmployeeNameTranslate","useDateFormat","useLocale","useInfiniteScroll","AddTrackerLogModal","EditTrackerLogModal","DeleteConfirmationDialog","EmployeeTrackerLogCard","OxdIcon","OxdSheet","OxdSpinner","name","components","props","trackerId","type","Number","required","empNumber","setup","http","window","appGlobal","baseUrl","limit","state","total","items","meta","positive","negative","infinite","isLoading","showNoRecordsFound","$tEmpName","jsDateFormat","locale","fetchData","getAll","offset","length","then","response","data","Array","isArray","map","item","reviewerPictureSrc","reviewer","reviewerName","addedDate","modifiedDate","finally","scrollerRef","imgSrc","trackerName","employeeName","showAddTrackerModal","showEditTrackerModal","editTrackerLogId","beforeMount","request","method","url","employee","firstName","lastName","terminationId","$t","methods","onClickAdd","onAddTrackerModalClose","resetItems","onEditTrackerModalClose","onClickEdit","id","onClickDelete","$refs","deleteDialog","showDialog","confirmation","deleteItems","deleteAll","ids","$toast","deleteSuccess"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmPerformancePlugin\\pages\\EmployeeTrackerLogs.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"orangehrm-background-container\">\n    <div class=\"orangehrm-card-container\">\n      <div class=\"orangehrm-employee-tracker\">\n        <div class=\"orangehrm-employee-tracker-image-section\">\n          <div class=\"orangehrm-employee-tracker-image-wrapper\">\n            <img alt=\"profile picture\" class=\"employee-image\" :src=\"imgSrc\" />\n          </div>\n        </div>\n        <div class=\"orangehrm-employee-tracker-header-section\">\n          <div class=\"orangehrm-employee-tracker-header\">\n            <oxd-text tag=\"h5\" class=\"orangehrm-employee-tracker-header-title\">\n              {{ trackerName }}\n            </oxd-text>\n            <oxd-text\n              tag=\"h6\"\n              class=\"orangehrm-employee-tracker-header-subtitle\"\n            >\n              {{ employeeName }}\n            </oxd-text>\n          </div>\n          <div class=\"orangehrm-employee-tracker-ratings\">\n            <div\n              v-if=\"meta.positive > 0\"\n              class=\"orangehrm-employee-tracker-ratings-info\"\n            >\n              <oxd-icon\n                class=\"orangehrm-employee-tracker-ratings-icon --positive\"\n                type=\"svg\"\n                name=\"thumbsup\"\n              />\n              <oxd-text\n                class=\"orangehrm-employee-tracker-ratings-text --positive\"\n              >\n                {{ meta.positive }}\n              </oxd-text>\n            </div>\n            <div\n              v-if=\"meta.negative > 0\"\n              class=\"orangehrm-employee-tracker-ratings-info\"\n            >\n              <oxd-icon\n                class=\"orangehrm-employee-tracker-ratings-icon --negative\"\n                type=\"svg\"\n                name=\"thumbsdown\"\n              />\n              <oxd-text\n                class=\"orangehrm-employee-tracker-ratings-text --negative\"\n              >\n                {{ meta.negative }}\n              </oxd-text>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <br />\n    <div class=\"orangehrm-paper-container\">\n      <div class=\"orangehrm-header-container\">\n        <oxd-text tag=\"h5\" class=\"orangehrm-employee-tracker-list-header\">\n          {{ $t('performance.tracker_logs') }}\n        </oxd-text>\n        <oxd-button\n          :label=\"$t('performance.add_log')\"\n          icon-name=\"plus\"\n          display-type=\"secondary\"\n          @click=\"onClickAdd\"\n        />\n      </div>\n      <div ref=\"scrollerRef\" class=\"orangehrm-container\">\n        <oxd-sheet\n          v-for=\"(item, index) in items\"\n          :key=\"index\"\n          :gutters=\"false\"\n          type=\"gray-lighten-2\"\n          class=\"orangehrm-scroll-card\"\n        >\n          <employee-tracker-log-card\n            :tracker-log=\"item\"\n            @edit=\"onClickEdit\"\n            @delete=\"onClickDelete\"\n          />\n        </oxd-sheet>\n        <div\n          v-if=\"showNoRecordsFound\"\n          class=\"orangehrm-employee-tracker-no-records\"\n        >\n          <oxd-text>\n            {{ $t('general.n_records_found', {count: 0}) }}\n          </oxd-text>\n        </div>\n        <oxd-loading-spinner\n          v-if=\"isLoading\"\n          class=\"orangehrm-container-loader\"\n        />\n      </div>\n    </div>\n    <add-tracker-log-modal\n      v-if=\"showAddTrackerModal\"\n      :tracker-id=\"trackerId\"\n      @close=\"onAddTrackerModalClose\"\n    ></add-tracker-log-modal>\n    <edit-tracker-log-modal\n      v-if=\"showEditTrackerModal\"\n      :tracker-id=\"trackerId\"\n      :tracker-log-id=\"editTrackerLogId\"\n      @close=\"onEditTrackerModalClose\"\n    ></edit-tracker-log-modal>\n    <delete-confirmation ref=\"deleteDialog\"></delete-confirmation>\n  </div>\n</template>\n\n<script>\nimport {APIService} from '@/core/util/services/api.service';\nimport {reactive, toRefs, computed} from 'vue';\nimport {formatDate, parseDate} from '@ohrm/core/util/helper/datefns';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport useLocale from '@/core/util/composable/useLocale';\nimport useInfiniteScroll from '@/core/util/composable/useInfiniteScroll';\nimport AddTrackerLogModal from '@/orangehrmPerformancePlugin/components/AddTrackerLogModal';\nimport EditTrackerLogModal from '@/orangehrmPerformancePlugin/components/EditTrackerLogModal';\nimport DeleteConfirmationDialog from '@/core/components/dialogs/DeleteConfirmationDialog';\nimport EmployeeTrackerLogCard from '@/orangehrmPerformancePlugin/components/EmployeeTrackerLogCard';\nimport {OxdIcon, OxdSheet, OxdSpinner} from '@ohrm/oxd';\n\nexport default {\n  name: 'ViewEmployeeTrackerLogs',\n  components: {\n    'oxd-icon': OxdIcon,\n    'oxd-sheet': OxdSheet,\n    'oxd-loading-spinner': OxdSpinner,\n    'add-tracker-log-modal': AddTrackerLogModal,\n    'edit-tracker-log-modal': EditTrackerLogModal,\n    'delete-confirmation': DeleteConfirmationDialog,\n    'employee-tracker-log-card': EmployeeTrackerLogCard,\n  },\n  props: {\n    trackerId: {\n      type: Number,\n      required: true,\n    },\n    empNumber: {\n      type: Number,\n      required: true,\n    },\n  },\n  setup(props) {\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      `/api/v2/performance/trackers/${props.trackerId}/logs`,\n    );\n    const limit = 10;\n    const state = reactive({\n      total: 0,\n      items: [],\n      meta: {\n        positive: 0,\n        negative: 0,\n      },\n      infinite: false,\n      isLoading: false,\n      showNoRecordsFound: false,\n    });\n\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const {jsDateFormat} = useDateFormat();\n    const {locale} = useLocale();\n\n    const fetchData = () => {\n      state.showNoRecordsFound = false;\n      state.isLoading = true;\n      http\n        .getAll({\n          limit: limit,\n          offset: state.items.length === 0 ? 0 : limit,\n        })\n        .then((response) => {\n          const {data, meta} = response.data;\n          state.total = meta?.total || 0;\n          if (Array.isArray(data)) {\n            state.items = [\n              ...state.items,\n              ...data.map((item) => {\n                return {\n                  ...item,\n                  reviewerPictureSrc: `${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${item.reviewer.empNumber}`,\n                  reviewerName: $tEmpName(item.reviewer),\n                  addedDate: formatDate(\n                    parseDate(item.addedDate),\n                    jsDateFormat,\n                    {locale},\n                  ),\n                  modifiedDate: formatDate(\n                    parseDate(item.modifiedDate),\n                    jsDateFormat,\n                    {locale},\n                  ),\n                };\n              }),\n            ];\n            state.meta = {...state.meta, ...meta};\n          }\n        })\n        .finally(() => {\n          state.showNoRecordsFound = state.total === 0;\n          state.isLoading = false;\n        });\n    };\n\n    const {scrollerRef} = useInfiniteScroll(() => {\n      if (state.items.length >= state.total) return;\n      fetchData();\n    });\n\n    const imgSrc = computed(() => {\n      return `${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${props.empNumber}`;\n    });\n\n    return {\n      http,\n      scrollerRef,\n      fetchData,\n      ...toRefs(state),\n      imgSrc,\n    };\n  },\n  data() {\n    return {\n      trackerName: '',\n      employeeName: '',\n      showAddTrackerModal: false,\n      showEditTrackerModal: false,\n      editTrackerLogId: null,\n    };\n  },\n  beforeMount() {\n    this.http\n      .request({\n        method: 'GET',\n        url: `/api/v2/performance/employees/trackers/${this.trackerId}`,\n      })\n      .then((response) => {\n        const {data} = response.data;\n        this.trackerName = data.trackerName;\n        this.employeeName = `${data.employee.firstName} ${\n          data.employee.lastName\n        } ${\n          data.employee.terminationId\n            ? ` ${this.$t('general.past_employee')}`\n            : ''\n        }`;\n      })\n      .then(() => {\n        this.fetchData();\n      });\n  },\n  methods: {\n    onClickAdd() {\n      this.showAddTrackerModal = true;\n    },\n    onAddTrackerModalClose() {\n      this.showAddTrackerModal = false;\n      this.resetItems();\n    },\n    onEditTrackerModalClose() {\n      this.showEditTrackerModal = false;\n      this.resetItems();\n    },\n    onClickEdit(id) {\n      this.editTrackerLogId = id;\n      this.showEditTrackerModal = true;\n    },\n    onClickDelete(id) {\n      this.$refs.deleteDialog.showDialog().then((confirmation) => {\n        if (confirmation === 'ok') {\n          this.deleteItems([id]);\n        }\n      });\n    },\n    deleteItems(items) {\n      if (items instanceof Array) {\n        this.items = [];\n        this.isLoading = true;\n        this.http\n          .deleteAll({\n            ids: items,\n          })\n          .then(() => {\n            return this.$toast.deleteSuccess();\n          })\n          .finally(() => {\n            this.fetchData();\n          });\n      }\n    },\n    resetItems() {\n      this.items = [];\n      this.fetchData();\n    },\n  },\n};\n</script>\n\n<style src=\"./employee-tracker-log.scss\" lang=\"scss\" scoped></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}