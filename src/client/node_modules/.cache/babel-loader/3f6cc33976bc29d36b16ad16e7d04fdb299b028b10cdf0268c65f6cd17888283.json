{"ast":null,"code":"import useLocale from '@/core/util/composable/useLocale';\nimport { APIService } from '@/core/util/services/api.service';\nimport { parseDate, formatDate } from '@/core/util/helper/datefns';\nimport ProfileImage from '@/orangehrmBuzzPlugin/components/ProfileImage';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\nexport default {\n  name: 'UpcomingAnniversaries',\n  components: {\n    'profile-image': ProfileImage\n  },\n  setup() {\n    const {\n      locale\n    } = useLocale();\n    const {\n      $tEmpName\n    } = useEmployeeNameTranslate();\n    const celebrationPic = `${window.appGlobal.publicPath}/images/year_celebration.png`;\n    const noContentPic = `${window.appGlobal.publicPath}/images/buzz_no_anniversaries.png`;\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/buzz/anniversaries');\n    return {\n      http,\n      locale,\n      noContentPic,\n      celebrationPic,\n      tEmpName: $tEmpName\n    };\n  },\n  data() {\n    return {\n      viewMore: false,\n      isLoading: false,\n      anniversaries: [],\n      anniversariesCount: 0\n    };\n  },\n  computed: {\n    isViewDetails() {\n      return !this.viewMore;\n    },\n    isEmpty() {\n      return !this.isLoading && this.anniversaries.length === 0;\n    }\n  },\n  beforeMount() {\n    this.anniversariesLimit = 5;\n    this.getAnniversaries();\n  },\n  methods: {\n    onSeeMore() {\n      this.viewMore = !this.viewMore;\n      if (this.viewMore) {\n        this.anniversariesLimit = 0;\n      } else {\n        this.anniversariesLimit = 5;\n      }\n      this.getAnniversaries();\n    },\n    getAnniversaries() {\n      this.isLoading = true;\n      this.http.getAll({\n        limit: this.anniversariesLimit\n      }).then(response => {\n        const {\n          data,\n          meta\n        } = response.data;\n        this.anniversaries = data.map(item => {\n          const {\n            employee,\n            jobTitle,\n            joinedDate\n          } = item;\n          return {\n            empNumber: employee.empNumber,\n            empName: this.tEmpName(employee, {\n              includeMiddle: false,\n              excludePastEmpTag: false\n            }),\n            jobTitle: jobTitle.title,\n            joinedDate: formatDate(parseDate(joinedDate), 'MMM dd', {\n              locale: this.locale\n            }),\n            anniversaryYear: new Date().getFullYear() - new Date(joinedDate).getFullYear()\n          };\n        });\n        this.anniversariesCount = meta?.total;\n      }).finally(() => this.isLoading = false);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["useLocale","APIService","parseDate","formatDate","ProfileImage","useEmployeeNameTranslate","name","components","setup","locale","$tEmpName","celebrationPic","window","appGlobal","publicPath","noContentPic","http","baseUrl","tEmpName","data","viewMore","isLoading","anniversaries","anniversariesCount","computed","isViewDetails","isEmpty","length","beforeMount","anniversariesLimit","getAnniversaries","methods","onSeeMore","getAll","limit","then","response","meta","map","item","employee","jobTitle","joinedDate","empNumber","empName","includeMiddle","excludePastEmpTag","title","anniversaryYear","Date","getFullYear","total","finally"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmBuzzPlugin\\components\\UpcomingAnniversaries.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"orangehrm-buzz-anniversary\">\n    <oxd-text type=\"card-title\" class=\"orangehrm-buzz-anniversary-title\">\n      {{ $t('buzz.upcoming_anniversaries') }}\n    </oxd-text>\n    <div\n      class=\"orangehrm-buzz-anniversary-content\"\n      :class=\"{'--show-more': anniversariesCount > 5}\"\n    >\n      <div\n        v-for=\"anniversary in anniversaries\"\n        :key=\"anniversary\"\n        class=\"orangehrm-buzz-anniversary-item\"\n      >\n        <div class=\"orangehrm-buzz-anniversary-profile\">\n          <profile-image :employee=\"anniversary\"></profile-image>\n          <div class=\"orangehrm-buzz-anniversary-profile-details\">\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-emp-name\">\n              {{ anniversary.empName }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-job-details\">\n              {{ anniversary.jobTitle }}\n            </oxd-text>\n          </div>\n        </div>\n        <div class=\"orangehrm-buzz-anniversary-duration\">\n          <img\n            alt=\"year celebration\"\n            class=\"orangehrm-buzz-anniversary-year-celebration\"\n            :src=\"celebrationPic\"\n          />\n          <div class=\"orangehrm-buzz-anniversary-durations-text\">\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-years\">\n              {{ anniversary.anniversaryYear }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-years\">\n              {{ $t('buzz.n_year', {yearsCount: anniversary.anniversaryYear}) }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-date\">\n              {{ anniversary.joinedDate }}\n            </oxd-text>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"isEmpty\" class=\"orangehrm-buzz-anniversary-nocontent\">\n        <img :src=\"noContentPic\" alt=\"No Content\" />\n        <oxd-text tag=\"p\">\n          {{ $t('general.no_records_found') }}\n        </oxd-text>\n      </div>\n    </div>\n    <div\n      v-if=\"anniversariesCount > 5\"\n      class=\"orangehrm-buzz-anniversary-footer\"\n    >\n      <oxd-text tag=\"p\" @click=\"onSeeMore\">\n        {{ isViewDetails ? $t('general.show_more') : $t('general.show_less') }}\n      </oxd-text>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useLocale from '@/core/util/composable/useLocale';\nimport {APIService} from '@/core/util/services/api.service';\nimport {parseDate, formatDate} from '@/core/util/helper/datefns';\nimport ProfileImage from '@/orangehrmBuzzPlugin/components/ProfileImage';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\n\nexport default {\n  name: 'UpcomingAnniversaries',\n\n  components: {\n    'profile-image': ProfileImage,\n  },\n\n  setup() {\n    const {locale} = useLocale();\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const celebrationPic = `${window.appGlobal.publicPath}/images/year_celebration.png`;\n    const noContentPic = `${window.appGlobal.publicPath}/images/buzz_no_anniversaries.png`;\n\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/buzz/anniversaries',\n    );\n\n    return {\n      http,\n      locale,\n      noContentPic,\n      celebrationPic,\n      tEmpName: $tEmpName,\n    };\n  },\n\n  data() {\n    return {\n      viewMore: false,\n      isLoading: false,\n      anniversaries: [],\n      anniversariesCount: 0,\n    };\n  },\n\n  computed: {\n    isViewDetails() {\n      return !this.viewMore;\n    },\n    isEmpty() {\n      return !this.isLoading && this.anniversaries.length === 0;\n    },\n  },\n\n  beforeMount() {\n    this.anniversariesLimit = 5;\n    this.getAnniversaries();\n  },\n\n  methods: {\n    onSeeMore() {\n      this.viewMore = !this.viewMore;\n      if (this.viewMore) {\n        this.anniversariesLimit = 0;\n      } else {\n        this.anniversariesLimit = 5;\n      }\n      this.getAnniversaries();\n    },\n    getAnniversaries() {\n      this.isLoading = true;\n      this.http\n        .getAll({limit: this.anniversariesLimit})\n        .then((response) => {\n          const {data, meta} = response.data;\n          this.anniversaries = data.map((item) => {\n            const {employee, jobTitle, joinedDate} = item;\n            return {\n              empNumber: employee.empNumber,\n              empName: this.tEmpName(employee, {\n                includeMiddle: false,\n                excludePastEmpTag: false,\n              }),\n              jobTitle: jobTitle.title,\n              joinedDate: formatDate(parseDate(joinedDate), 'MMM dd', {\n                locale: this.locale,\n              }),\n              anniversaryYear:\n                new Date().getFullYear() - new Date(joinedDate).getFullYear(),\n            };\n          });\n          this.anniversariesCount = meta?.total;\n        })\n        .finally(() => (this.isLoading = false));\n    },\n  },\n};\n</script>\n\n<style src=\"./upcoming-anniversaries.scss\" lang=\"scss\" scoped></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}