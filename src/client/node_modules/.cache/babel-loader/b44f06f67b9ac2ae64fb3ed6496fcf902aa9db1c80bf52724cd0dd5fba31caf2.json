{"ast":null,"code":"import { navigate } from '@/core/util/helper/navigation';\nimport EmployeeAutocomplete from '@/core/components/inputs/EmployeeAutocomplete';\nimport SupervisorAutoComplete from '@/orangehrmPerformancePlugin/components/SupervisorAutoComplete';\nimport { APIService } from '@/core/util/services/api.service';\nimport { required, validSelection, validDateFormat, endDateShouldBeAfterStartDate, startDateShouldBeBeforeEndDate } from '@/core/util/validation/rules';\nimport useForm from '@/core/util/composable/useForm';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nconst reviewModel = {\n  employee: null,\n  supervisorReviewer: null,\n  startDate: null,\n  endDate: null,\n  dueDate: null\n};\nexport default {\n  components: {\n    'employee-autocomplete': EmployeeAutocomplete,\n    'supervisor-autocomplete': SupervisorAutoComplete\n  },\n  setup() {\n    const {\n      formRef,\n      invalid,\n      validate\n    } = useForm();\n    const {\n      userDateFormat\n    } = useDateFormat();\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/performance/manage/reviews');\n    http.setIgnorePath('/api/v2/performance/manage/reviews');\n    return {\n      formRef,\n      invalid,\n      validate,\n      http,\n      userDateFormat\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      review: {\n        ...reviewModel\n      },\n      rules: {\n        employee: [required, validSelection],\n        supervisorReviewer: [required, validSelection],\n        startDate: [required, validDateFormat(this.userDateFormat), startDateShouldBeBeforeEndDate(() => this.review.endDate, this.$t('performance.review_period_start_date_should_be_before_end_date'))],\n        endDate: [required, validDateFormat(this.userDateFormat), endDateShouldBeAfterStartDate(() => this.review.startDate, this.$t('performance.review_period_end_date_should_be_after_start_date'))],\n        dueDate: [required, validDateFormat(), endDateShouldBeAfterStartDate(() => this.review.endDate, this.$t('performance.due_date_should_be_after_review_period_end_date'))]\n      }\n    };\n  },\n  methods: {\n    onCancel() {\n      navigate('/performance/searchPerformanceReview');\n    },\n    onSave(activate = false) {\n      this.validate().then(() => {\n        if (this.invalid === true) return;\n        this.isLoading = true;\n        this.http.create({\n          empNumber: this.review.employee.id,\n          reviewerEmpNumber: this.review.supervisorReviewer.id,\n          startDate: this.review.startDate,\n          endDate: this.review.endDate,\n          dueDate: this.review.dueDate,\n          activate\n        }).then(() => {\n          if (activate === true) {\n            return this.$toast.success({\n              title: this.$t('general.success'),\n              message: this.$t('general.successfully_activated')\n            });\n          } else {\n            return this.$toast.updateSuccess();\n          }\n        }).then(() => {\n          this.onCancel();\n        }).catch(response => {\n          return this.$toast.warn({\n            title: this.$t('general.warning'),\n            message: response?.data.error.message\n          });\n        }).finally(() => {\n          this.isLoading = false;\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["navigate","EmployeeAutocomplete","SupervisorAutoComplete","APIService","required","validSelection","validDateFormat","endDateShouldBeAfterStartDate","startDateShouldBeBeforeEndDate","useForm","useDateFormat","reviewModel","employee","supervisorReviewer","startDate","endDate","dueDate","components","setup","formRef","invalid","validate","userDateFormat","http","window","appGlobal","baseUrl","setIgnorePath","data","isLoading","review","rules","$t","methods","onCancel","onSave","activate","then","create","empNumber","id","reviewerEmpNumber","$toast","success","title","message","updateSuccess","catch","response","warn","error","finally"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmPerformancePlugin\\pages\\AddReview.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"orangehrm-background-container\">\n    <div class=\"orangehrm-card-container\">\n      <oxd-text class=\"orangehrm-main-title\" tag=\"h6\">\n        {{ $t('performance.add_review') }}\n      </oxd-text>\n      <oxd-divider />\n      <oxd-form ref=\"formRef\" :loading=\"isLoading\">\n        <oxd-form-row>\n          <oxd-grid :cols=\"3\" class=\"orangehrm-full-width-grid\">\n            <oxd-grid-item>\n              <employee-autocomplete\n                v-model=\"review.employee\"\n                :rules=\"rules.employee\"\n                required\n              />\n            </oxd-grid-item>\n          </oxd-grid>\n        </oxd-form-row>\n        <oxd-form-row>\n          <oxd-grid :cols=\"3\" class=\"orangehrm-full-width-grid\">\n            <oxd-grid-item>\n              <supervisor-autocomplete\n                v-model=\"review.supervisorReviewer\"\n                :rules=\"rules.supervisorReviewer\"\n                :subordinate=\"review.employee\"\n                required\n              />\n            </oxd-grid-item>\n          </oxd-grid>\n        </oxd-form-row>\n        <oxd-form-row>\n          <oxd-grid :cols=\"3\" class=\"orangehrm-full-width-grid\">\n            <oxd-grid-item>\n              <date-input\n                v-model=\"review.startDate\"\n                :label=\"$t('performance.review_period_start_date')\"\n                :rules=\"rules.startDate\"\n                required\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <date-input\n                v-model=\"review.endDate\"\n                :label=\"$t('performance.review_period_end_date')\"\n                :rules=\"rules.endDate\"\n                required\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <date-input\n                v-model=\"review.dueDate\"\n                :label=\"$t('performance.due_date')\"\n                :rules=\"rules.dueDate\"\n                required\n              />\n            </oxd-grid-item>\n          </oxd-grid>\n        </oxd-form-row>\n        <oxd-divider />\n        <oxd-form-actions>\n          <required-text />\n          <div class=\"orangehrm-button-row\">\n            <oxd-button\n              display-type=\"ghost\"\n              :label=\"$t('general.cancel')\"\n              type=\"button\"\n              @click=\"onCancel\"\n            />\n            <oxd-button\n              display-type=\"ghost\"\n              :label=\"$t('general.save')\"\n              type=\"submit\"\n              @click=\"onSave(false)\"\n            />\n            <oxd-button\n              display-type=\"secondary\"\n              :label=\"$t('performance.activate')\"\n              type=\"button\"\n              @click=\"onSave(true)\"\n            />\n          </div>\n        </oxd-form-actions>\n      </oxd-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {navigate} from '@/core/util/helper/navigation';\nimport EmployeeAutocomplete from '@/core/components/inputs/EmployeeAutocomplete';\nimport SupervisorAutoComplete from '@/orangehrmPerformancePlugin/components/SupervisorAutoComplete';\nimport {APIService} from '@/core/util/services/api.service';\nimport {\n  required,\n  validSelection,\n  validDateFormat,\n  endDateShouldBeAfterStartDate,\n  startDateShouldBeBeforeEndDate,\n} from '@/core/util/validation/rules';\nimport useForm from '@/core/util/composable/useForm';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\n\nconst reviewModel = {\n  employee: null,\n  supervisorReviewer: null,\n  startDate: null,\n  endDate: null,\n  dueDate: null,\n};\n\nexport default {\n  components: {\n    'employee-autocomplete': EmployeeAutocomplete,\n    'supervisor-autocomplete': SupervisorAutoComplete,\n  },\n  setup() {\n    const {formRef, invalid, validate} = useForm();\n    const {userDateFormat} = useDateFormat();\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/performance/manage/reviews',\n    );\n    http.setIgnorePath('/api/v2/performance/manage/reviews');\n    return {\n      formRef,\n      invalid,\n      validate,\n      http,\n      userDateFormat,\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      review: {...reviewModel},\n      rules: {\n        employee: [required, validSelection],\n        supervisorReviewer: [required, validSelection],\n        startDate: [\n          required,\n          validDateFormat(this.userDateFormat),\n          startDateShouldBeBeforeEndDate(\n            () => this.review.endDate,\n            this.$t(\n              'performance.review_period_start_date_should_be_before_end_date',\n            ),\n          ),\n        ],\n        endDate: [\n          required,\n          validDateFormat(this.userDateFormat),\n          endDateShouldBeAfterStartDate(\n            () => this.review.startDate,\n            this.$t(\n              'performance.review_period_end_date_should_be_after_start_date',\n            ),\n          ),\n        ],\n        dueDate: [\n          required,\n          validDateFormat(),\n          endDateShouldBeAfterStartDate(\n            () => this.review.endDate,\n            this.$t(\n              'performance.due_date_should_be_after_review_period_end_date',\n            ),\n          ),\n        ],\n      },\n    };\n  },\n  methods: {\n    onCancel() {\n      navigate('/performance/searchPerformanceReview');\n    },\n    onSave(activate = false) {\n      this.validate().then(() => {\n        if (this.invalid === true) return;\n        this.isLoading = true;\n        this.http\n          .create({\n            empNumber: this.review.employee.id,\n            reviewerEmpNumber: this.review.supervisorReviewer.id,\n            startDate: this.review.startDate,\n            endDate: this.review.endDate,\n            dueDate: this.review.dueDate,\n            activate,\n          })\n          .then(() => {\n            if (activate === true) {\n              return this.$toast.success({\n                title: this.$t('general.success'),\n                message: this.$t('general.successfully_activated'),\n              });\n            } else {\n              return this.$toast.updateSuccess();\n            }\n          })\n          .then(() => {\n            this.onCancel();\n          })\n          .catch((response) => {\n            return this.$toast.warn({\n              title: this.$t('general.warning'),\n              message: response?.data.error.message,\n            });\n          })\n          .finally(() => {\n            this.isLoading = false;\n          });\n      });\n    },\n  },\n};\n</script>\n<style src=\"./review.scss\" lang=\"scss\" scoped></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}