{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6242e5b6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"orangehrm-buzz-anniversary\"\n};\nconst _hoisted_2 = {\n  class: \"orangehrm-buzz-anniversary-profile\"\n};\nconst _hoisted_3 = {\n  class: \"orangehrm-buzz-anniversary-profile-details\"\n};\nconst _hoisted_4 = {\n  class: \"orangehrm-buzz-anniversary-duration\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"orangehrm-buzz-anniversary-durations-text\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"orangehrm-buzz-anniversary-nocontent\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 0,\n  class: \"orangehrm-buzz-anniversary-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_profile_image = _resolveComponent(\"profile-image\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_oxd_text, {\n    type: \"card-title\",\n    class: \"orangehrm-buzz-anniversary-title\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.upcoming_anniversaries')), 1)]),\n    _: 1\n  }), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"orangehrm-buzz-anniversary-content\", {\n      '--show-more': $data.anniversariesCount > 5\n    }])\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.anniversaries, anniversary => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: anniversary,\n      class: \"orangehrm-buzz-anniversary-item\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_profile_image, {\n      employee: anniversary\n    }, null, 8, [\"employee\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"orangehrm-buzz-anniversary-emp-name\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.empName), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"orangehrm-buzz-anniversary-job-details\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.jobTitle), 1)]),\n      _: 2\n    }, 1024)])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n      alt: \"year celebration\",\n      class: \"orangehrm-buzz-anniversary-year-celebration\",\n      src: $setup.celebrationPic\n    }, null, 8, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"orangehrm-buzz-anniversary-duration-years\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.anniversaryYear), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"orangehrm-buzz-anniversary-duration-years\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.n_year', {\n        yearsCount: anniversary.anniversaryYear\n      })), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"orangehrm-buzz-anniversary-duration-date\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.joinedDate), 1)]),\n      _: 2\n    }, 1024)])])]);\n  }), 128)), $options.isEmpty ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n    src: $setup.noContentPic,\n    alt: \"No Content\"\n  }, null, 8, _hoisted_8), _createVNode(_component_oxd_text, {\n    tag: \"p\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('general.no_records_found')), 1)]),\n    _: 1\n  })])) : _createCommentVNode(\"\", true)], 2), $data.anniversariesCount > 5 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createVNode(_component_oxd_text, {\n    tag: \"p\",\n    onClick: $options.onSeeMore\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($options.isViewDetails ? _ctx.$t('general.show_more') : _ctx.$t('general.show_less')), 1)]),\n    _: 1\n  }, 8, [\"onClick\"])])) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"mappings":";;;EAoBOA,KAAK,EAAC;AAA4B;;EAa5BA,KAAK,EAAC;AAAoC;;EAExCA,KAAK,EAAC;AAA4C;;EASpDA,KAAK,EAAC;AAAqC;;;EAMzCA,KAAK,EAAC;AAA2C;;;EAatCA,KAAK,EAAC;;;;;EAS1BA,KAAK,EAAC;;;;;uBApDVC,oBA0DM,OA1DNC,UA0DM,GAzDJC,aAEWC;IAFDC,IAAI,EAAC,YAAY;IAACL,KAAK,EAAC;;sBAChC,MAAuC,mCAApCM,OAAE;;MAEPC,oBA6CM;IA5CJP,KAAK,mBAAC,oCAAoC;MAAA,eAClBQ,wBAAkB;IAAA;yBAE1CP,oBAkCMQ,6BAjCkBD,mBAAa,EAA5BE,WAAW;yBADpBT,oBAkCM;MAhCHU,GAAG,EAAED,WAAW;MACjBV,KAAK,EAAC;QAENO,oBAUM,OAVNK,UAUM,GATJT,aAAuDU;MAAvCC,QAAQ,EAAEJ;IAAW,2BACrCH,oBAOM,OAPNQ,UAOM,GANJZ,aAEWC;MAFDY,GAAG,EAAC,GAAG;MAAChB,KAAK,EAAC;;wBACtB,MAAyB,mCAAtBU,WAAW,CAACO,OAAO;;cAExBd,aAEWC;MAFDY,GAAG,EAAC,GAAG;MAAChB,KAAK,EAAC;;wBACtB,MAA0B,mCAAvBU,WAAW,CAACQ,QAAQ;;kBAI7BX,oBAiBM,OAjBNY,UAiBM,GAhBJZ,oBAIE;MAHAa,GAAG,EAAC,kBAAkB;MACtBpB,KAAK,EAAC,6CAA6C;MAClDqB,GAAG,EAAEC;6BAERf,oBAUM,OAVNgB,UAUM,GATJpB,aAEWC;MAFDY,GAAG,EAAC,GAAG;MAAChB,KAAK,EAAC;;wBACtB,MAAiC,mCAA9BU,WAAW,CAACc,eAAe;;cAEhCrB,aAEWC;MAFDY,GAAG,EAAC,GAAG;MAAChB,KAAK,EAAC;;wBACtB,MAAkE,mCAA/DM,OAAE;QAAAmB,YAA6Bf,WAAW,CAACc;MAAe;;cAE/DrB,aAEWC;MAFDY,GAAG,EAAC,GAAG;MAAChB,KAAK,EAAC;;wBACtB,MAA4B,mCAAzBU,WAAW,CAACgB,UAAU;;;aAKtBC,gBAAO,kBAAlB1B,oBAKM,OALN2B,UAKM,GAJJrB,oBAA4C;IAAtCc,GAAG,EAAEC,mBAAY;IAAEF,GAAG,EAAC;2BAC7BjB,aAEWC;IAFDY,GAAG,EAAC;EAAG;sBACf,MAAoC,mCAAjCV,OAAE;;8CAKHE,wBAAkB,sBAD1BP,oBAOM,OAPN4B,UAOM,GAHJ1B,aAEWC;IAFDY,GAAG,EAAC,GAAG;IAAEc,OAAK,EAAEH;;sBACxB,MAAuE,mCAApEA,sBAAa,GAAGrB,OAAE,wBAAwBA,OAAE","names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_oxd_text","type","_ctx","_createElementVNode","$data","_Fragment","anniversary","key","_hoisted_2","_component_profile_image","employee","_hoisted_3","tag","empName","jobTitle","_hoisted_4","alt","src","$setup","_hoisted_6","anniversaryYear","yearsCount","joinedDate","$options","_hoisted_7","_hoisted_9","onClick"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmBuzzPlugin\\components\\UpcomingAnniversaries.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"orangehrm-buzz-anniversary\">\n    <oxd-text type=\"card-title\" class=\"orangehrm-buzz-anniversary-title\">\n      {{ $t('buzz.upcoming_anniversaries') }}\n    </oxd-text>\n    <div\n      class=\"orangehrm-buzz-anniversary-content\"\n      :class=\"{'--show-more': anniversariesCount > 5}\"\n    >\n      <div\n        v-for=\"anniversary in anniversaries\"\n        :key=\"anniversary\"\n        class=\"orangehrm-buzz-anniversary-item\"\n      >\n        <div class=\"orangehrm-buzz-anniversary-profile\">\n          <profile-image :employee=\"anniversary\"></profile-image>\n          <div class=\"orangehrm-buzz-anniversary-profile-details\">\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-emp-name\">\n              {{ anniversary.empName }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-job-details\">\n              {{ anniversary.jobTitle }}\n            </oxd-text>\n          </div>\n        </div>\n        <div class=\"orangehrm-buzz-anniversary-duration\">\n          <img\n            alt=\"year celebration\"\n            class=\"orangehrm-buzz-anniversary-year-celebration\"\n            :src=\"celebrationPic\"\n          />\n          <div class=\"orangehrm-buzz-anniversary-durations-text\">\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-years\">\n              {{ anniversary.anniversaryYear }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-years\">\n              {{ $t('buzz.n_year', {yearsCount: anniversary.anniversaryYear}) }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"orangehrm-buzz-anniversary-duration-date\">\n              {{ anniversary.joinedDate }}\n            </oxd-text>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"isEmpty\" class=\"orangehrm-buzz-anniversary-nocontent\">\n        <img :src=\"noContentPic\" alt=\"No Content\" />\n        <oxd-text tag=\"p\">\n          {{ $t('general.no_records_found') }}\n        </oxd-text>\n      </div>\n    </div>\n    <div\n      v-if=\"anniversariesCount > 5\"\n      class=\"orangehrm-buzz-anniversary-footer\"\n    >\n      <oxd-text tag=\"p\" @click=\"onSeeMore\">\n        {{ isViewDetails ? $t('general.show_more') : $t('general.show_less') }}\n      </oxd-text>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useLocale from '@/core/util/composable/useLocale';\nimport {APIService} from '@/core/util/services/api.service';\nimport {parseDate, formatDate} from '@/core/util/helper/datefns';\nimport ProfileImage from '@/orangehrmBuzzPlugin/components/ProfileImage';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\n\nexport default {\n  name: 'UpcomingAnniversaries',\n\n  components: {\n    'profile-image': ProfileImage,\n  },\n\n  setup() {\n    const {locale} = useLocale();\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const celebrationPic = `${window.appGlobal.publicPath}/images/year_celebration.png`;\n    const noContentPic = `${window.appGlobal.publicPath}/images/buzz_no_anniversaries.png`;\n\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/buzz/anniversaries',\n    );\n\n    return {\n      http,\n      locale,\n      noContentPic,\n      celebrationPic,\n      tEmpName: $tEmpName,\n    };\n  },\n\n  data() {\n    return {\n      viewMore: false,\n      isLoading: false,\n      anniversaries: [],\n      anniversariesCount: 0,\n    };\n  },\n\n  computed: {\n    isViewDetails() {\n      return !this.viewMore;\n    },\n    isEmpty() {\n      return !this.isLoading && this.anniversaries.length === 0;\n    },\n  },\n\n  beforeMount() {\n    this.anniversariesLimit = 5;\n    this.getAnniversaries();\n  },\n\n  methods: {\n    onSeeMore() {\n      this.viewMore = !this.viewMore;\n      if (this.viewMore) {\n        this.anniversariesLimit = 0;\n      } else {\n        this.anniversariesLimit = 5;\n      }\n      this.getAnniversaries();\n    },\n    getAnniversaries() {\n      this.isLoading = true;\n      this.http\n        .getAll({limit: this.anniversariesLimit})\n        .then((response) => {\n          const {data, meta} = response.data;\n          this.anniversaries = data.map((item) => {\n            const {employee, jobTitle, joinedDate} = item;\n            return {\n              empNumber: employee.empNumber,\n              empName: this.tEmpName(employee, {\n                includeMiddle: false,\n                excludePastEmpTag: false,\n              }),\n              jobTitle: jobTitle.title,\n              joinedDate: formatDate(parseDate(joinedDate), 'MMM dd', {\n                locale: this.locale,\n              }),\n              anniversaryYear:\n                new Date().getFullYear() - new Date(joinedDate).getFullYear(),\n            };\n          });\n          this.anniversariesCount = meta?.total;\n        })\n        .finally(() => (this.isLoading = false));\n    },\n  },\n};\n</script>\n\n<style src=\"./upcoming-anniversaries.scss\" lang=\"scss\" scoped></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}