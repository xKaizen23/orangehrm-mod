{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, Fragment as _Fragment, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4fbf300e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"orangehrm-horizontal-padding orangehrm-vertical-padding\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"orangehrm-horizontal-padding orangehrm-vertical-padding\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_oxd_divider = _resolveComponent(\"oxd-divider\");\n  const _component_date_input = _resolveComponent(\"date-input\");\n  const _component_oxd_grid_item = _resolveComponent(\"oxd-grid-item\");\n  const _component_oxd_input_field = _resolveComponent(\"oxd-input-field\");\n  const _component_job_spec_download = _resolveComponent(\"job-spec-download\");\n  const _component_oxd_grid = _resolveComponent(\"oxd-grid\");\n  const _component_oxd_form_row = _resolveComponent(\"oxd-form-row\");\n  const _component_oxd_switch_input = _resolveComponent(\"oxd-switch-input\");\n  const _component_file_upload_input = _resolveComponent(\"file-upload-input\");\n  const _component_submit_button = _resolveComponent(\"submit-button\");\n  const _component_oxd_form_actions = _resolveComponent(\"oxd-form-actions\");\n  const _component_oxd_form = _resolveComponent(\"oxd-form\");\n  const _component_profile_action_header = _resolveComponent(\"profile-action-header\");\n  const _component_terminate_modal = _resolveComponent(\"terminate-modal\");\n  const _component_edit_employee_layout = _resolveComponent(\"edit-employee-layout\");\n  return _openBlock(), _createBlock(_component_edit_employee_layout, {\n    screen: \"job\",\n    \"employee-id\": $props.empNumber,\n    \"max-file-size\": $props.maxFileSize,\n    \"allowed-file-types\": $props.allowedFileTypes\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_oxd_text, {\n      tag: \"h6\",\n      class: \"orangehrm-main-title\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('pim.job_details')), 1)]),\n      _: 1\n    }), _createVNode(_component_oxd_divider), _createVNode(_component_oxd_form, {\n      loading: $data.isLoading,\n      onSubmitValid: $options.onSave\n    }, {\n      default: _withCtx(() => [_createVNode(_component_oxd_form_row, null, {\n        default: _withCtx(() => [_createVNode(_component_oxd_grid, {\n          cols: 3,\n          class: \"orangehrm-full-width-grid\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_date_input, {\n              modelValue: $data.job.joinedDate,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.job.joinedDate = $event),\n              label: _ctx.$t('general.joined_date'),\n              rules: $data.rules.joinedDate,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"rules\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_oxd_input_field, {\n              modelValue: $data.job.jobTitleId,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.job.jobTitleId = $event),\n              type: \"select\",\n              label: _ctx.$t('general.job_title'),\n              options: $options.normalizedJobTitles,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"options\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [(_openBlock(), _createBlock(_component_job_spec_download, {\n              key: `jobspec-${$options.selectedJobTitleId}`,\n              \"resource-id\": $options.selectedJobTitleId\n            }, null, 8, [\"resource-id\"]))]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_oxd_input_field, {\n              modelValue: $data.job.jobCategoryId,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.job.jobCategoryId = $event),\n              type: \"select\",\n              label: _ctx.$t('general.job_category'),\n              options: $props.jobCategories,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"options\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_oxd_input_field, {\n              modelValue: $data.job.subunitId,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.job.subunitId = $event),\n              type: \"select\",\n              label: _ctx.$t('general.sub_unit'),\n              options: $props.subunits,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"options\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_oxd_input_field, {\n              modelValue: $data.job.locationId,\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.job.locationId = $event),\n              type: \"select\",\n              label: _ctx.$t('general.location'),\n              options: $props.locations,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"options\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_oxd_input_field, {\n              modelValue: $data.job.empStatusId,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.job.empStatusId = $event),\n              type: \"select\",\n              label: _ctx.$t('general.employment_status'),\n              options: $props.employmentStatuses,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"options\", \"disabled\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }), _createVNode(_component_oxd_divider), _createVNode(_component_oxd_form_row, {\n        class: \"user-form-header\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_oxd_text, {\n          class: \"user-form-header-text\",\n          tag: \"p\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('pim.include_employment_contract_details')), 1)]),\n          _: 1\n        }), _createVNode(_component_oxd_switch_input, {\n          modelValue: $data.showContractDetails,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.showContractDetails = $event)\n        }, null, 8, [\"modelValue\"])]),\n        _: 1\n      }), $data.showContractDetails ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 0\n      }, [_createVNode(_component_oxd_form_row, null, {\n        default: _withCtx(() => [_createVNode(_component_oxd_grid, {\n          cols: 3,\n          class: \"orangehrm-full-width-grid\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_date_input, {\n              modelValue: $data.contract.startDate,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.contract.startDate = $event),\n              label: _ctx.$t('pim.contract_start_date'),\n              rules: $data.rules.startDate,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"rules\", \"disabled\"])]),\n            _: 1\n          }), _createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_date_input, {\n              modelValue: $data.contract.endDate,\n              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.contract.endDate = $event),\n              label: _ctx.$t('pim.contract_end_date'),\n              rules: $data.rules.endDate,\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"modelValue\", \"label\", \"rules\", \"disabled\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      }), _createVNode(_component_oxd_form_row, null, {\n        default: _withCtx(() => [_createVNode(_component_oxd_grid, {\n          cols: 2,\n          class: \"orangehrm-full-width-grid\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_oxd_grid_item, null, {\n            default: _withCtx(() => [_createVNode(_component_file_upload_input, {\n              newFile: $data.contract.newAttachment,\n              \"onUpdate:newFile\": _cache[9] || (_cache[9] = $event => $data.contract.newAttachment = $event),\n              method: $data.contract.method,\n              \"onUpdate:method\": _cache[10] || (_cache[10] = $event => $data.contract.method = $event),\n              label: _ctx.$t('pim.contract_details'),\n              \"button-label\": _ctx.$t('general.browse'),\n              file: $data.contract.oldAttachment,\n              rules: $data.rules.contractAttachment,\n              url: `pim/viewAttachment/empNumber/${$props.empNumber}/attachId`,\n              hint: _ctx.$t('general.accepts_up_to_n_mb', {\n                count: $options.formattedFileSize\n              }),\n              disabled: !$options.hasUpdatePermissions\n            }, null, 8, [\"newFile\", \"method\", \"label\", \"button-label\", \"file\", \"rules\", \"url\", \"hint\", \"disabled\"])]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        _: 1\n      })], 64)) : _createCommentVNode(\"\", true), $options.hasUpdatePermissions ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [_createVNode(_component_oxd_divider), _createVNode(_component_oxd_form_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_submit_button)]),\n        _: 1\n      })], 64)) : _createCommentVNode(\"\", true)]),\n      _: 1\n    }, 8, [\"loading\", \"onSubmitValid\"])]), $options.hasUpdatePermissions && !$data.isLoading ? (_openBlock(), _createBlock(_component_oxd_divider, {\n      key: 0\n    })) : _createCommentVNode(\"\", true), $options.hasUpdatePermissions && !$data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_profile_action_header, {\n      \"icon-name\": \"\",\n      \"display-type\": $options.terminationActionType,\n      label: $options.terminationActionLabel,\n      title: $options.terminationActionLabel,\n      class: \"--termination-button\",\n      onClick: $options.onClickTerminate\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('pim.employee_termination_activation')) + \" \", 1), $data.termination && $data.termination.id ? (_openBlock(), _createBlock(_component_oxd_text, {\n        key: 0,\n        tag: \"p\",\n        class: \"orangehrm-terminate-date\",\n        onClick: $options.openTerminateModal\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('pim.terminated_on')) + \": \" + _toDisplayString($options.terminationDate), 1)]),\n        _: 1\n      }, 8, [\"onClick\"])) : _createCommentVNode(\"\", true)]),\n      _: 1\n    }, 8, [\"display-type\", \"label\", \"title\", \"onClick\"])])) : _createCommentVNode(\"\", true), $data.showTerminateModal ? (_openBlock(), _createBlock(_component_terminate_modal, {\n      key: 2,\n      \"employee-id\": $props.empNumber,\n      \"termination-reasons\": $props.terminationReasons,\n      \"termination-id\": $data.termination.id,\n      onClose: $options.closeTerminateModal\n    }, null, 8, [\"employee-id\", \"termination-reasons\", \"termination-id\", \"onClose\"])) : _createCommentVNode(\"\", true)]),\n    _: 1\n  }, 8, [\"employee-id\", \"max-file-size\", \"allowed-file-types\"]);\n}","map":{"version":3,"mappings":"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","names":["class","_createBlock","_component_edit_employee_layout","screen","$props","_createElementVNode","_hoisted_1","_createVNode","_component_oxd_text","tag","_ctx","_component_oxd_divider","_component_oxd_form","loading","$data","onSubmitValid","$options","_component_oxd_form_row","_component_oxd_grid","cols","_component_oxd_grid_item","_component_date_input","joinedDate","label","rules","disabled","_component_oxd_input_field","jobTitleId","type","options","_component_job_spec_download","key","jobCategoryId","subunitId","locationId","empStatusId","_component_oxd_switch_input","_createElementBlock","_Fragment","startDate","endDate","_component_file_upload_input","newFile","newAttachment","method","file","oldAttachment","contractAttachment","url","hint","count","_component_oxd_form_actions","_component_submit_button","_hoisted_2","_component_profile_action_header","title","onClick","id","_component_terminate_modal","onClose"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmPimPlugin\\pages\\employee\\EmployeeJob.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <edit-employee-layout\n    screen=\"job\"\n    :employee-id=\"empNumber\"\n    :max-file-size=\"maxFileSize\"\n    :allowed-file-types=\"allowedFileTypes\"\n  >\n    <div class=\"orangehrm-horizontal-padding orangehrm-vertical-padding\">\n      <oxd-text tag=\"h6\" class=\"orangehrm-main-title\">\n        {{ $t('pim.job_details') }}\n      </oxd-text>\n      <oxd-divider />\n      <oxd-form :loading=\"isLoading\" @submit-valid=\"onSave\">\n        <oxd-form-row>\n          <oxd-grid :cols=\"3\" class=\"orangehrm-full-width-grid\">\n            <oxd-grid-item>\n              <date-input\n                v-model=\"job.joinedDate\"\n                :label=\"$t('general.joined_date')\"\n                :rules=\"rules.joinedDate\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <oxd-input-field\n                v-model=\"job.jobTitleId\"\n                type=\"select\"\n                :label=\"$t('general.job_title')\"\n                :options=\"normalizedJobTitles\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <job-spec-download\n                :key=\"`jobspec-${selectedJobTitleId}`\"\n                :resource-id=\"selectedJobTitleId\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <oxd-input-field\n                v-model=\"job.jobCategoryId\"\n                type=\"select\"\n                :label=\"$t('general.job_category')\"\n                :options=\"jobCategories\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <oxd-input-field\n                v-model=\"job.subunitId\"\n                type=\"select\"\n                :label=\"$t('general.sub_unit')\"\n                :options=\"subunits\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <oxd-input-field\n                v-model=\"job.locationId\"\n                type=\"select\"\n                :label=\"$t('general.location')\"\n                :options=\"locations\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n            <oxd-grid-item>\n              <oxd-input-field\n                v-model=\"job.empStatusId\"\n                type=\"select\"\n                :label=\"$t('general.employment_status')\"\n                :options=\"employmentStatuses\"\n                :disabled=\"!hasUpdatePermissions\"\n              />\n            </oxd-grid-item>\n          </oxd-grid>\n        </oxd-form-row>\n        <oxd-divider />\n\n        <oxd-form-row class=\"user-form-header\">\n          <oxd-text class=\"user-form-header-text\" tag=\"p\">\n            {{ $t('pim.include_employment_contract_details') }}\n          </oxd-text>\n          <oxd-switch-input v-model=\"showContractDetails\" />\n        </oxd-form-row>\n\n        <template v-if=\"showContractDetails\">\n          <oxd-form-row>\n            <oxd-grid :cols=\"3\" class=\"orangehrm-full-width-grid\">\n              <oxd-grid-item>\n                <date-input\n                  v-model=\"contract.startDate\"\n                  :label=\"$t('pim.contract_start_date')\"\n                  :rules=\"rules.startDate\"\n                  :disabled=\"!hasUpdatePermissions\"\n                />\n              </oxd-grid-item>\n\n              <oxd-grid-item>\n                <date-input\n                  v-model=\"contract.endDate\"\n                  :label=\"$t('pim.contract_end_date')\"\n                  :rules=\"rules.endDate\"\n                  :disabled=\"!hasUpdatePermissions\"\n                />\n              </oxd-grid-item>\n            </oxd-grid>\n          </oxd-form-row>\n          <oxd-form-row>\n            <oxd-grid :cols=\"2\" class=\"orangehrm-full-width-grid\">\n              <oxd-grid-item>\n                <file-upload-input\n                  v-model:newFile=\"contract.newAttachment\"\n                  v-model:method=\"contract.method\"\n                  :label=\"$t('pim.contract_details')\"\n                  :button-label=\"$t('general.browse')\"\n                  :file=\"contract.oldAttachment\"\n                  :rules=\"rules.contractAttachment\"\n                  :url=\"`pim/viewAttachment/empNumber/${empNumber}/attachId`\"\n                  :hint=\"\n                    $t('general.accepts_up_to_n_mb', {count: formattedFileSize})\n                  \"\n                  :disabled=\"!hasUpdatePermissions\"\n                />\n              </oxd-grid-item>\n            </oxd-grid>\n          </oxd-form-row>\n        </template>\n\n        <template v-if=\"hasUpdatePermissions\">\n          <oxd-divider />\n          <oxd-form-actions>\n            <submit-button />\n          </oxd-form-actions>\n        </template>\n      </oxd-form>\n    </div>\n\n    <oxd-divider v-if=\"hasUpdatePermissions && !isLoading\" />\n\n    <div\n      v-if=\"hasUpdatePermissions && !isLoading\"\n      class=\"orangehrm-horizontal-padding orangehrm-vertical-padding\"\n    >\n      <profile-action-header\n        icon-name=\"\"\n        :display-type=\"terminationActionType\"\n        :label=\"terminationActionLabel\"\n        :title=\"terminationActionLabel\"\n        class=\"--termination-button\"\n        @click=\"onClickTerminate\"\n      >\n        {{ $t('pim.employee_termination_activation') }}\n        <oxd-text\n          v-if=\"termination && termination.id\"\n          tag=\"p\"\n          class=\"orangehrm-terminate-date\"\n          @click=\"openTerminateModal\"\n        >\n          {{ $t('pim.terminated_on') }}: {{ terminationDate }}\n        </oxd-text>\n      </profile-action-header>\n    </div>\n    <terminate-modal\n      v-if=\"showTerminateModal\"\n      :employee-id=\"empNumber\"\n      :termination-reasons=\"terminationReasons\"\n      :termination-id=\"termination.id\"\n      @close=\"closeTerminateModal\"\n    ></terminate-modal>\n  </edit-employee-layout>\n</template>\n\n<script>\nimport {APIService} from '@ohrm/core/util/services/api.service';\nimport FileUploadInput from '@/core/components/inputs/FileUploadInput';\nimport EditEmployeeLayout from '@/orangehrmPimPlugin/components/EditEmployeeLayout';\nimport JobSpecDownload from '@/orangehrmPimPlugin/components/JobSpecDownload';\nimport ProfileActionHeader from '@/orangehrmPimPlugin/components/ProfileActionHeader';\nimport TerminateModal from '@/orangehrmPimPlugin/components/TerminateModal';\nimport {\n  required,\n  maxFileSize,\n  validFileTypes,\n  validDateFormat,\n  endDateShouldBeAfterStartDate,\n} from '@ohrm/core/util/validation/rules';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport {formatDate, parseDate} from '@/core/util/helper/datefns';\nimport useLocale from '@/core/util/composable/useLocale';\nimport {OxdSwitchInput} from '@ohrm/oxd';\n\nconst jobDetailsModel = {\n  joinedDate: '',\n  jobTitleId: [],\n  empStatusId: [],\n  jobCategoryId: [],\n  subunitId: [],\n  locationId: [],\n};\n\nconst contractDetailsModel = {\n  startDate: '',\n  endDate: '',\n  oldAttachment: null,\n  newAttachment: null,\n  method: 'keepCurrent',\n};\n\nexport default {\n  components: {\n    'edit-employee-layout': EditEmployeeLayout,\n    'oxd-switch-input': OxdSwitchInput,\n    'job-spec-download': JobSpecDownload,\n    'file-upload-input': FileUploadInput,\n    'profile-action-header': ProfileActionHeader,\n    'terminate-modal': TerminateModal,\n  },\n\n  props: {\n    empNumber: {\n      type: String,\n      required: true,\n    },\n    locations: {\n      type: Array,\n      default: () => [],\n    },\n    jobTitles: {\n      type: Array,\n      default: () => [],\n    },\n    jobCategories: {\n      type: Array,\n      default: () => [],\n    },\n    subunits: {\n      type: Array,\n      default: () => [],\n    },\n    employmentStatuses: {\n      type: Array,\n      default: () => [],\n    },\n    terminationReasons: {\n      type: Array,\n      default: () => [],\n    },\n    allowedFileTypes: {\n      type: Array,\n      required: true,\n    },\n    maxFileSize: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      `/api/v2/pim/employees/${props.empNumber}/job-details`,\n    );\n    const {jsDateFormat, userDateFormat} = useDateFormat();\n    const {locale} = useLocale();\n\n    return {\n      http,\n      locale,\n      jsDateFormat,\n      userDateFormat,\n    };\n  },\n\n  data() {\n    return {\n      isLoading: false,\n      showContractDetails: false,\n      job: {...jobDetailsModel},\n      contract: {...contractDetailsModel},\n      termination: null,\n      showTerminateModal: false,\n      rules: {\n        joinedDate: [validDateFormat(this.userDateFormat)],\n        startDate: [validDateFormat(this.userDateFormat)],\n        endDate: [\n          validDateFormat(this.userDateFormat),\n          endDateShouldBeAfterStartDate(() => this.contract.startDate),\n        ],\n        contractAttachment: [\n          (v) => {\n            if (this.contract.method == 'replaceCurrent') {\n              return required(v);\n            } else {\n              return true;\n            }\n          },\n          validFileTypes(this.allowedFileTypes),\n          maxFileSize(this.maxFileSize),\n        ],\n      },\n    };\n  },\n\n  computed: {\n    selectedJobTitleId() {\n      const jobTitleId = this.job.jobTitleId?.id;\n      return jobTitleId || 0;\n    },\n    terminationActionLabel() {\n      return this.termination?.id\n        ? this.$t('pim.activate_employment')\n        : this.$t('pim.terminate_employment');\n    },\n    terminationActionType() {\n      return this.termination?.id ? 'ghost-success' : 'label-danger';\n    },\n    hasUpdatePermissions() {\n      return this.$can.update(`job_details`);\n    },\n    normalizedJobTitles() {\n      return this.jobTitles.map((jobTitle) => {\n        return {\n          id: jobTitle.id,\n          label: jobTitle?.deleted\n            ? jobTitle.label + this.$t('general.deleted')\n            : jobTitle.label,\n        };\n      });\n    },\n    terminationDate() {\n      return this.termination?.date\n        ? formatDate(parseDate(this.termination.date), this.jsDateFormat, {\n            locale: this.locale,\n          })\n        : null;\n    },\n    formattedFileSize() {\n      return Math.round((this.maxFileSize / (1024 * 1024)) * 100) / 100;\n    },\n  },\n\n  beforeMount() {\n    this.isLoading = true;\n    this.http\n      .getAll()\n      .then((response) => {\n        this.updateJobModel(response);\n      })\n      .then(() => {\n        return this.http.request({\n          method: 'GET',\n          url: `/api/v2/pim/employees/${this.empNumber}/employment-contract`,\n        });\n      })\n      .then((response) => {\n        this.updateContractModel(response);\n      })\n      .finally(() => {\n        this.isLoading = false;\n      });\n  },\n\n  methods: {\n    onSave() {\n      this.isLoading = true;\n      this.http\n        .request({\n          method: 'PUT',\n          data: {\n            ...this.job,\n            jobTitleId: this.job.jobTitleId?.id,\n            jobCategoryId: this.job.jobCategoryId?.id,\n            subunitId: this.job.subunitId?.id,\n            empStatusId: this.job.empStatusId?.id,\n            locationId: this.job.locationId?.id,\n          },\n        })\n        .then((response) => {\n          this.updateJobModel(response);\n          return this.http.request({\n            method: 'PUT',\n            url: `/api/v2/pim/employees/${this.empNumber}/employment-contract`,\n            data: {\n              startDate: this.contract.startDate,\n              endDate: this.contract.endDate,\n              currentContractAttachment: this.contract.oldAttachment\n                ? this.contract.method\n                : undefined,\n              contractAttachment: this.contract.newAttachment\n                ? this.contract.newAttachment\n                : undefined,\n            },\n          });\n        })\n        .then((response) => {\n          if (response) {\n            this.updateContractModel(response);\n          }\n          return this.$toast.updateSuccess();\n        })\n        .then(() => {\n          this.isLoading = false;\n        });\n    },\n\n    onClickTerminate() {\n      if (this.termination?.id) {\n        this.isLoading = true;\n        this.http\n          .request({\n            method: 'DELETE',\n            url: `/api/v2/pim/employees/${this.empNumber}/terminations`,\n          })\n          .then(() => {\n            return this.$toast.updateSuccess();\n          })\n          .then(() => {\n            location.reload();\n          });\n      } else {\n        this.openTerminateModal();\n      }\n    },\n\n    openTerminateModal() {\n      this.showTerminateModal = true;\n    },\n\n    closeTerminateModal(reload) {\n      this.showTerminateModal = false;\n      if (reload) {\n        location.reload();\n      }\n    },\n\n    updateContractModel(response) {\n      const {data} = response.data;\n      this.contract.startDate = data.startDate;\n      this.contract.endDate = data.endDate;\n      this.contract.oldAttachment = data.contractAttachment?.id\n        ? data.contractAttachment\n        : null;\n      this.contract.newAttachment = null;\n      this.contract.method = 'keepCurrent';\n      if (data.startDate || data.endDate || data.contractAttachment?.id) {\n        this.showContractDetails = true;\n      } else {\n        this.showContractDetails = false;\n      }\n    },\n\n    updateJobModel(response) {\n      const {data} = response.data;\n      this.job.joinedDate = data.joinedDate;\n      this.job.jobTitleId = this.normalizedJobTitles.find(\n        (item) => item.id === data.jobTitle?.id,\n      );\n      this.job.jobCategoryId = this.jobCategories.find(\n        (item) => item.id === data.jobCategory?.id,\n      );\n      this.job.subunitId = this.subunits.find(\n        (item) => item.id === data.subunit?.id,\n      );\n      this.job.empStatusId = this.employmentStatuses.find(\n        (item) => item.id === data.empStatus?.id,\n      );\n      this.job.locationId = this.locations.find(\n        (item) => item.id === data.location?.id,\n      );\n      this.termination = data.employeeTerminationRecord;\n    },\n  },\n};\n</script>\n\n<style src=\"./employee.scss\" lang=\"scss\" scoped></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}