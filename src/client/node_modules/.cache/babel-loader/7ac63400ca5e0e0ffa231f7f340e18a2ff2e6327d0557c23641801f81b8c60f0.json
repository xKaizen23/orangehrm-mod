{"ast":null,"code":"import { APIService } from '@ohrm/core/util/services/api.service';\nimport { OxdDialog } from '@ohrm/oxd';\nexport default {\n  name: 'EntitlementBulkUpdateModal',\n  components: {\n    'oxd-dialog': OxdDialog\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/leave/employees/leave-entitlements');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      show: false,\n      reject: null,\n      resolve: null,\n      headers: [{\n        title: this.$t('general.employee'),\n        name: 'employee',\n        slot: 'title',\n        style: {\n          flex: 1\n        }\n      }, {\n        title: this.$t('leave.old_entitlement'),\n        name: 'current',\n        style: {\n          flex: 1\n        }\n      }, {\n        title: this.$t('leave.new_entitlement'),\n        name: 'updateAs',\n        style: {\n          flex: 1\n        }\n      }],\n      items: []\n    };\n  },\n  methods: {\n    showDialog() {\n      return this.http.getAll({\n        leaveTypeId: this.data.leaveType?.id,\n        fromDate: this.data.leavePeriod?.startDate,\n        toDate: this.data.leavePeriod?.endDate,\n        entitlement: this.data.entitlement,\n        locationId: this.data.location?.id,\n        subunitId: this.data.subunit?.id\n      }).then(response => {\n        const {\n          data\n        } = response.data;\n        this.items = Array.isArray(data) ? data.map(item => {\n          return {\n            employee: `${item.firstName} ${item.lastName}`,\n            current: item.entitlement?.current ? parseFloat(item.entitlement.current).toFixed(2) : '0.00',\n            updateAs: item.entitlement?.updateAs ? parseFloat(item.entitlement.updateAs).toFixed(2) : '0.00'\n          };\n        }) : [];\n        return new Promise((resolve, reject) => {\n          this.resolve = resolve;\n          this.reject = reject;\n          this.show = true;\n        });\n      });\n    },\n    onConfirm() {\n      this.show = false;\n      this.resolve && this.resolve('ok');\n    },\n    onCancel() {\n      this.show = false;\n      this.resolve && this.resolve('cancel');\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["APIService","OxdDialog","name","components","props","data","type","Object","required","setup","http","window","appGlobal","baseUrl","show","reject","resolve","headers","title","$t","slot","style","flex","items","methods","showDialog","getAll","leaveTypeId","leaveType","id","fromDate","leavePeriod","startDate","toDate","endDate","entitlement","locationId","location","subunitId","subunit","then","response","Array","isArray","map","item","employee","firstName","lastName","current","parseFloat","toFixed","updateAs","Promise","onConfirm","onCancel"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmLeavePlugin\\components\\EntitlementBulkUpdateModal.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <oxd-dialog\n    v-if=\"show\"\n    :gutters=\"false\"\n    class=\"orangehrm-dialog-modal\"\n    @update:show=\"onCancel\"\n  >\n    <div class=\"orangehrm-dialog-header-container\">\n      <oxd-text type=\"card-title\">\n        {{ $t('leave.updating_entitlement') }} -\n        {{ $t('leave.matching_employees') }}\n      </oxd-text>\n    </div>\n    <oxd-divider\n      class=\"orangehrm-dialog-horizontal-margin orangehrm-clear-margins\"\n    />\n    <div\n      class=\"orangehrm-dialog-horizontal-padding orangehrm-dialog-vertical-padding\"\n    >\n      <oxd-text type=\"subtitle-2\">\n        {{\n          $t('leave.selected_leave_entitlement_applied_to_following_employees')\n        }}\n      </oxd-text>\n    </div>\n    <div class=\"orangehrm-container\">\n      <oxd-card-table\n        :headers=\"headers\"\n        :items=\"items\"\n        :clickable=\"false\"\n        class=\"orangehrm-horizontal-padding\"\n        row-decorator=\"oxd-table-decorator-card\"\n      />\n    </div>\n    <div\n      class=\"orangehrm-dialog-horizontal-padding orangehrm-dialog-vertical-padding\"\n    >\n      <oxd-form-actions>\n        <oxd-button\n          display-type=\"ghost\"\n          :label=\"$t('general.cancel')\"\n          @click=\"onCancel\"\n        />\n        <submit-button :label=\"$t('general.confirm')\" @click=\"onConfirm\" />\n      </oxd-form-actions>\n    </div>\n  </oxd-dialog>\n</template>\n\n<script>\nimport {APIService} from '@ohrm/core/util/services/api.service';\nimport {OxdDialog} from '@ohrm/oxd';\n\nexport default {\n  name: 'EntitlementBulkUpdateModal',\n  components: {\n    'oxd-dialog': OxdDialog,\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true,\n    },\n  },\n  setup() {\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/leave/employees/leave-entitlements',\n    );\n    return {\n      http,\n    };\n  },\n  data() {\n    return {\n      show: false,\n      reject: null,\n      resolve: null,\n      headers: [\n        {\n          title: this.$t('general.employee'),\n          name: 'employee',\n          slot: 'title',\n          style: {flex: 1},\n        },\n        {\n          title: this.$t('leave.old_entitlement'),\n          name: 'current',\n          style: {flex: 1},\n        },\n        {\n          title: this.$t('leave.new_entitlement'),\n          name: 'updateAs',\n          style: {flex: 1},\n        },\n      ],\n      items: [],\n    };\n  },\n  methods: {\n    showDialog() {\n      return this.http\n        .getAll({\n          leaveTypeId: this.data.leaveType?.id,\n          fromDate: this.data.leavePeriod?.startDate,\n          toDate: this.data.leavePeriod?.endDate,\n          entitlement: this.data.entitlement,\n          locationId: this.data.location?.id,\n          subunitId: this.data.subunit?.id,\n        })\n        .then((response) => {\n          const {data} = response.data;\n          this.items = Array.isArray(data)\n            ? data.map((item) => {\n                return {\n                  employee: `${item.firstName} ${item.lastName}`,\n                  current: item.entitlement?.current\n                    ? parseFloat(item.entitlement.current).toFixed(2)\n                    : '0.00',\n                  updateAs: item.entitlement?.updateAs\n                    ? parseFloat(item.entitlement.updateAs).toFixed(2)\n                    : '0.00',\n                };\n              })\n            : [];\n          return new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n            this.show = true;\n          });\n        });\n    },\n    onConfirm() {\n      this.show = false;\n      this.resolve && this.resolve('ok');\n    },\n    onCancel() {\n      this.show = false;\n      this.resolve && this.resolve('cancel');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.orangehrm-container {\n  max-height: 165px;\n  overflow-y: auto;\n  @include oxd-scrollbar();\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}