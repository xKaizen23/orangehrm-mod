{"ast":null,"code":"import { OxdDivider } from '@ohrm/oxd';\nimport { APIService } from '@/core/util/services/api.service';\nimport QRCode from '@/orangehrmCorporateDirectoryPlugin/components/QRCode';\nexport default {\n  name: 'EmployeeDetails',\n  components: {\n    'qr-code': QRCode,\n    'oxd-divider': OxdDivider\n  },\n  props: {\n    employeeId: {\n      type: Number,\n      required: true\n    },\n    isMobile: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/directory/employees');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      employeeWorkTelephone: null,\n      employeeWorkEmail: null,\n      showTelephoneClip: false,\n      showEmailClip: false,\n      toGoEmail: null,\n      qrPayload: null,\n      employeeName: null\n    };\n  },\n  watch: {\n    employeeId: function () {\n      this.callEmployeeDetailsApi();\n    }\n  },\n  beforeMount() {\n    this.callEmployeeDetailsApi();\n  },\n  methods: {\n    openClientTelephone() {\n      window.location.href = 'tel:' + this.employeeWorkTelephone;\n    },\n    openClientEmail() {\n      window.location.href = 'mailto:' + this.employeeWorkEmail;\n    },\n    copyEmail() {\n      navigator.clipboard?.writeText(this.employeeWorkEmail);\n    },\n    copyTelephone() {\n      navigator.clipboard?.writeText(this.employeeWorkTelephone);\n    },\n    callEmployeeDetailsApi() {\n      this.http.get(this.employeeId, {\n        model: 'detailed'\n      }).then(response => {\n        const {\n          data\n        } = response.data;\n        this.employeeName = {\n          firstName: data.firstName,\n          middleName: data.middleName,\n          lastName: data.lastName\n        };\n        this.employeeWorkEmail = data.contactInfo?.workEmail;\n        this.employeeWorkTelephone = data.contactInfo?.workTelephone;\n        this.generateQrPayload();\n      });\n    },\n    generateQrPayload() {\n      let content = '';\n      content += `N:${this.employeeName?.lastName || ''};`;\n      content += `${this.employeeName?.firstName || ''};`;\n      content += `${this.employeeName?.middleName || ''};\\n`;\n      if (this.employeeWorkTelephone) content += `TEL;CELL:${this.employeeWorkTelephone}\\n`;\n      if (this.employeeWorkEmail) content += `EMAIL;WORK;INTERNET:${this.employeeWorkEmail}\\n`;\n      this.qrPayload = `BEGIN:VCARD\\nVERSION:3.0\\n${content}END:VCARD\\n`;\n    }\n  }\n};","map":{"version":3,"mappings":"AA+FA,SAAQA,UAAU,QAAO,WAAW;AACpC,SAAQC,UAAU,QAAO,kCAAkC;AAC3D,OAAOC,MAAK,MAAO,uDAAuD;AAE1E,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,UAAU,EAAE;IACV,SAAS,EAAEF,MAAM;IACjB,aAAa,EAAEF;EACjB,CAAC;EACDK,KAAK,EAAE;IACLC,UAAU,EAAE;MACVC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,QAAQ,EAAE;MACRH,IAAI,EAAEI,OAAO;MACbC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,KAAK,GAAG;IACN,MAAMC,IAAG,GAAI,IAAIb,UAAU,CACzBc,MAAM,CAACC,SAAS,CAACC,OAAO,EACxB,6BAA6B,CAC9B;IACD,OAAO;MACLH;IACF,CAAC;EACH,CAAC;EACDI,IAAI,GAAG;IACL,OAAO;MACLC,qBAAqB,EAAE,IAAI;MAC3BC,iBAAiB,EAAE,IAAI;MACvBC,iBAAiB,EAAE,KAAK;MACxBC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,IAAI;MACfC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACLpB,UAAU,EAAE,YAAY;MACtB,IAAI,CAACqB,sBAAsB,EAAE;IAC/B;EACF,CAAC;EACDC,WAAW,GAAG;IACZ,IAAI,CAACD,sBAAsB,EAAE;EAC/B,CAAC;EACDE,OAAO,EAAE;IACPC,mBAAmB,GAAG;MACpBf,MAAM,CAACgB,QAAQ,CAACC,IAAG,GAAI,MAAK,GAAI,IAAI,CAACb,qBAAqB;IAC5D,CAAC;IACDc,eAAe,GAAG;MAChBlB,MAAM,CAACgB,QAAQ,CAACC,IAAG,GAAI,SAAQ,GAAI,IAAI,CAACZ,iBAAiB;IAC3D,CAAC;IACDc,SAAS,GAAG;MACVC,SAAS,CAACC,SAAS,EAAEC,SAAS,CAAC,IAAI,CAACjB,iBAAiB,CAAC;IACxD,CAAC;IACDkB,aAAa,GAAG;MACdH,SAAS,CAACC,SAAS,EAAEC,SAAS,CAAC,IAAI,CAAClB,qBAAqB,CAAC;IAC5D,CAAC;IACDQ,sBAAsB,GAAG;MACvB,IAAI,CAACb,IAAI,CAACyB,GAAG,CAAC,IAAI,CAACjC,UAAU,EAAE;QAACkC,KAAK,EAAE;MAAU,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;QACrE,MAAM;UAACxB;QAAI,IAAIwB,QAAQ,CAACxB,IAAI;QAC5B,IAAI,CAACO,YAAW,GAAI;UAClBkB,SAAS,EAAEzB,IAAI,CAACyB,SAAS;UACzBC,UAAU,EAAE1B,IAAI,CAAC0B,UAAU;UAC3BC,QAAQ,EAAE3B,IAAI,CAAC2B;QACjB,CAAC;QACD,IAAI,CAACzB,iBAAgB,GAAIF,IAAI,CAAC4B,WAAW,EAAEC,SAAS;QACpD,IAAI,CAAC5B,qBAAoB,GAAID,IAAI,CAAC4B,WAAW,EAAEE,aAAa;QAC5D,IAAI,CAACC,iBAAiB,EAAE;MAC1B,CAAC,CAAC;IACJ,CAAC;IACDA,iBAAiB,GAAG;MAClB,IAAIC,OAAM,GAAI,EAAE;MAChBA,OAAM,IAAM,KAAI,IAAI,CAACzB,YAAY,EAAEoB,QAAO,IAAK,EAAG,GAAE;MACpDK,OAAM,IAAM,GAAE,IAAI,CAACzB,YAAY,EAAEkB,SAAQ,IAAK,EAAG,GAAE;MACnDO,OAAM,IAAM,GAAE,IAAI,CAACzB,YAAY,EAAEmB,UAAS,IAAK,EAAG,KAAI;MACtD,IAAI,IAAI,CAACzB,qBAAqB,EAC5B+B,OAAM,IAAM,YAAW,IAAI,CAAC/B,qBAAsB,IAAG;MACvD,IAAI,IAAI,CAACC,iBAAiB,EACxB8B,OAAM,IAAM,uBAAsB,IAAI,CAAC9B,iBAAkB,IAAG;MAE9D,IAAI,CAACI,SAAQ,GAAK,6BAA4B0B,OAAQ,aAAY;IACpE;EACF;AACF,CAAC","names":["OxdDivider","APIService","QRCode","name","components","props","employeeId","type","Number","required","isMobile","Boolean","default","setup","http","window","appGlobal","baseUrl","data","employeeWorkTelephone","employeeWorkEmail","showTelephoneClip","showEmailClip","toGoEmail","qrPayload","employeeName","watch","callEmployeeDetailsApi","beforeMount","methods","openClientTelephone","location","href","openClientEmail","copyEmail","navigator","clipboard","writeText","copyTelephone","get","model","then","response","firstName","middleName","lastName","contactInfo","workEmail","workTelephone","generateQrPayload","content"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\orangehrm-5.7\\src\\client\\src\\orangehrmCorporateDirectoryPlugin\\components\\EmployeeDetails.vue"],"sourcesContent":["<!--\n/**\n * OrangeHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 OrangeHRM Inc., http://www.orangehrm.com\n *\n * OrangeHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * OrangeHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with OrangeHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <oxd-divider\n    v-show=\"employeeWorkEmail || employeeWorkTelephone\"\n  ></oxd-divider>\n  <div\n    v-show=\"employeeWorkEmail || employeeWorkTelephone\"\n    class=\"orangehrm-directory-card-rounded-body\"\n  >\n    <div v-show=\"employeeWorkTelephone\" class=\"orangehrm-directory-card-icon\">\n      <oxd-icon-button\n        display-type=\"success\"\n        name=\"telephone-fill\"\n        @click.stop=\"openClientTelephone\"\n      ></oxd-icon-button>\n    </div>\n    <div v-show=\"employeeWorkEmail\" class=\"orangehrm-directory-card-icon\">\n      <oxd-icon-button\n        display-type=\"danger\"\n        name=\"envelope-fill\"\n        @click.stop=\"openClientEmail\"\n      ></oxd-icon-button>\n    </div>\n  </div>\n  <div\n    v-show=\"employeeWorkTelephone\"\n    class=\"orangehrm-directory-card-hover\"\n    @mouseleave=\"showTelephoneClip = false\"\n    @mouseover=\"showTelephoneClip = true\"\n  >\n    <div class=\"orangehrm-directory-card-hover-body\">\n      <oxd-text type=\"toast-message\">{{ $t('pim.work_telephone') }}</oxd-text>\n      <oxd-text ref=\"cloneTelephone\" type=\"toast-title\">\n        {{ employeeWorkTelephone }}\n      </oxd-text>\n    </div>\n    <div\n      class=\"orangehrm-directory-card-hover-body orangehrm-directory-card-hover-icon\"\n    >\n      <oxd-icon-button\n        v-show=\"showTelephoneClip || isMobile\"\n        name=\"files\"\n        @click.stop=\"copyTelephone\"\n      ></oxd-icon-button>\n    </div>\n  </div>\n  <oxd-divider v-show=\"employeeWorkTelephone\"></oxd-divider>\n  <div\n    v-show=\"employeeWorkEmail\"\n    class=\"orangehrm-directory-card-hover\"\n    @mouseleave=\"showEmailClip = false\"\n    @mouseover=\"showEmailClip = true\"\n  >\n    <div class=\"orangehrm-directory-card-hover-body\">\n      <oxd-text type=\"toast-message\">{{ $t('general.work_email') }}</oxd-text>\n      <oxd-text ref=\"cloneEmail\" type=\"toast-title\">\n        {{ employeeWorkEmail }}\n      </oxd-text>\n    </div>\n    <div\n      class=\"orangehrm-directory-card-hover-body orangehrm-directory-card-hover-icon\"\n    >\n      <oxd-icon-button\n        v-show=\"showEmailClip || isMobile\"\n        name=\"files\"\n        @click.stop=\"copyEmail\"\n      ></oxd-icon-button>\n    </div>\n  </div>\n  <oxd-divider v-show=\"employeeWorkEmail\"></oxd-divider>\n  <qr-code\n    v-if=\"qrPayload && (employeeWorkTelephone || employeeWorkEmail)\"\n    :value=\"qrPayload\"\n  ></qr-code>\n</template>\n\n<script>\nimport {OxdDivider} from '@ohrm/oxd';\nimport {APIService} from '@/core/util/services/api.service';\nimport QRCode from '@/orangehrmCorporateDirectoryPlugin/components/QRCode';\n\nexport default {\n  name: 'EmployeeDetails',\n  components: {\n    'qr-code': QRCode,\n    'oxd-divider': OxdDivider,\n  },\n  props: {\n    employeeId: {\n      type: Number,\n      required: true,\n    },\n    isMobile: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup() {\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/directory/employees',\n    );\n    return {\n      http,\n    };\n  },\n  data() {\n    return {\n      employeeWorkTelephone: null,\n      employeeWorkEmail: null,\n      showTelephoneClip: false,\n      showEmailClip: false,\n      toGoEmail: null,\n      qrPayload: null,\n      employeeName: null,\n    };\n  },\n  watch: {\n    employeeId: function () {\n      this.callEmployeeDetailsApi();\n    },\n  },\n  beforeMount() {\n    this.callEmployeeDetailsApi();\n  },\n  methods: {\n    openClientTelephone() {\n      window.location.href = 'tel:' + this.employeeWorkTelephone;\n    },\n    openClientEmail() {\n      window.location.href = 'mailto:' + this.employeeWorkEmail;\n    },\n    copyEmail() {\n      navigator.clipboard?.writeText(this.employeeWorkEmail);\n    },\n    copyTelephone() {\n      navigator.clipboard?.writeText(this.employeeWorkTelephone);\n    },\n    callEmployeeDetailsApi() {\n      this.http.get(this.employeeId, {model: 'detailed'}).then((response) => {\n        const {data} = response.data;\n        this.employeeName = {\n          firstName: data.firstName,\n          middleName: data.middleName,\n          lastName: data.lastName,\n        };\n        this.employeeWorkEmail = data.contactInfo?.workEmail;\n        this.employeeWorkTelephone = data.contactInfo?.workTelephone;\n        this.generateQrPayload();\n      });\n    },\n    generateQrPayload() {\n      let content = '';\n      content += `N:${this.employeeName?.lastName || ''};`;\n      content += `${this.employeeName?.firstName || ''};`;\n      content += `${this.employeeName?.middleName || ''};\\n`;\n      if (this.employeeWorkTelephone)\n        content += `TEL;CELL:${this.employeeWorkTelephone}\\n`;\n      if (this.employeeWorkEmail)\n        content += `EMAIL;WORK;INTERNET:${this.employeeWorkEmail}\\n`;\n\n      this.qrPayload = `BEGIN:VCARD\\nVERSION:3.0\\n${content}END:VCARD\\n`;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.orangehrm-directory-card {\n  height: auto;\n  overflow: hidden;\n  padding: 0.5rem 1rem;\n  @include oxd-respond-to('md') {\n    min-height: 280px;\n  }\n\n  &-rounded-body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 1rem;\n    margin: 1rem 8px 1rem 0;\n    border-radius: 1.2rem;\n    width: auto;\n    height: 64px;\n    box-shadow: 5px 5px 5px 5px $oxd-background-white-shadow-color;\n  }\n\n  &-hover {\n    display: flex;\n    justify-content: space-between;\n    padding: 0.25rem 0.75rem;\n    border-radius: 0.5rem;\n    margin: auto;\n    @include oxd-respond-to('md') {\n      width: auto;\n    }\n\n    &-body {\n      display: block;\n      align-items: center;\n      justify-content: center;\n      overflow: hidden;\n      word-wrap: break-word;\n    }\n\n    &-icon {\n      color: $oxd-interface-gray-darken-1-color;\n      font-size: 14px;\n      display: flex;\n      flex-shrink: 0;\n      align-items: center;\n      justify-content: center;\n    }\n\n    &:hover {\n      background-color: $oxd-background-white-shadow-color;\n    }\n  }\n\n  &-icon {\n    margin: 0 0.5rem 0 0;\n    color: $oxd-interface-gray-darken-1-color;\n    font-size: 24px;\n    display: flex;\n    justify-content: center;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}